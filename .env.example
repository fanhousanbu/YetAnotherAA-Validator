# ===========================================
# BLS Signer Service Configuration
# ===========================================

# -----------------
# Server Configuration
# -----------------
# Port for HTTP API and WebSocket gossip
PORT=3001

# Environment mode
NODE_ENV=development

# -----------------
# Node State Management
# -----------------
# File path for storing node state (BLS keys, node ID, etc.)
# Use different files for each node instance
# IMPORTANT: This file contains the BLS private key - keep it secure and backed up!
NODE_STATE_FILE=./node_dev_001.json

# -----------------
# Gossip Network Configuration
# -----------------
# Public WebSocket URL that other nodes can connect to
# Format: ws://your-domain:port/ws or wss://your-domain/ws (for production)
GOSSIP_PUBLIC_URL=ws://localhost:3001/ws

# Bootstrap peers for joining the gossip network (comma-separated)
# Leave empty for the first/seed node
# Example: ws://node1:3001/ws,ws://node2:3002/ws
GOSSIP_BOOTSTRAP_PEERS=

# -----------------
# Blockchain Configuration
# -----------------
# Ethereum RPC URL (Sepolia testnet example)
ETH_RPC_URL=https://sepolia.infura.io/v3/YOUR_INFURA_PROJECT_ID

# BLS Validator contract address (for registering public keys)
VALIDATOR_CONTRACT_ADDRESS=0xD9756c11686B59F7DDf39E6360230316710485af

# -----------------
# Multiple Node Setup Example
# -----------------
# To run multiple nodes locally for testing, use different configurations:
#
# Node 1 (Seed Node):
#   PORT=3001
#   NODE_STATE_FILE=./node_dev_001.json
#   GOSSIP_PUBLIC_URL=ws://localhost:3001/ws
#   GOSSIP_BOOTSTRAP_PEERS=
#
# Node 2:
#   PORT=3002
#   NODE_STATE_FILE=./node_dev_002.json
#   GOSSIP_PUBLIC_URL=ws://localhost:3002/ws
#   GOSSIP_BOOTSTRAP_PEERS=ws://localhost:3001/ws
#
# Node 3:
#   PORT=3003
#   NODE_STATE_FILE=./node_dev_003.json
#   GOSSIP_PUBLIC_URL=ws://localhost:3003/ws
#   GOSSIP_BOOTSTRAP_PEERS=ws://localhost:3001/ws,ws://localhost:3002/ws
#
# -----------------
# Advanced Gossip Parameters (Optional)
# -----------------
# These have sensible defaults - only uncomment if you need custom values:
# GOSSIP_INTERVAL=5000                # Message gossip interval (ms)
# GOSSIP_FANOUT=3                     # Number of peers to gossip to
# GOSSIP_MAX_TTL=5                    # Max hops for message propagation
# GOSSIP_HEARTBEAT_INTERVAL=10000     # Health check interval (ms)
# GOSSIP_SUSPICION_TIMEOUT=30000      # Timeout before marking node as suspect (ms)
# GOSSIP_CLEANUP_TIMEOUT=60000        # Timeout before removing dead nodes (ms)
# GOSSIP_MAX_MESSAGE_HISTORY=1000     # Max stored messages for deduplication

# -----------------
# Production Deployment Notes
# -----------------
# 1. Security:
#    - Use HTTPS/WSS for GOSSIP_PUBLIC_URL in production
#    - Ensure NODE_STATE_FILE is backed up securely (contains BLS private key)
#    - Restrict access to node state files (chmod 600)
#    - Use firewall rules to protect gossip network ports
#
# 2. Node Registration:
#    - After first start, register node's BLS public key to validator contract
#    - Use Swagger UI at http://localhost:PORT/api
#    - Or POST /signature/register-node endpoint
#
# 3. Contract Configuration:
#    - Use your own deployed VALIDATOR_CONTRACT_ADDRESS for production
#    - Address above is reference deployment on Sepolia testnet
#
# 4. Network Setup:
#    - Configure GOSSIP_PUBLIC_URL with your public domain/IP
#    - Ensure WebSocket port is accessible by other nodes
#    - Use GOSSIP_BOOTSTRAP_PEERS to connect to existing network
